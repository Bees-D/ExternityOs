"use strict";(()=>{(function(){let i={stealth:!0,evasion:{webdriver:!1,hardwareConcurrency:8,deviceMemory:16,platform:"Win32",userAgent:navigator.userAgent.replace("Headless",""),experimentalQuic:!1},blackout:!0,sceneBypass:!0},r=location.origin,s=history.pushState,c=history.replaceState;function a(e){return e?`${r}/docs/lesson-view?id=${btoa(e.toString()).substring(0,12)}`:""}if(history.pushState=function(e,t,n){let o=a(n);return console.debug("[Ignition Sandbox] pushState masked:",o),s.apply(this,[e,t,o])},history.replaceState=function(e,t,n){let o=a(n);return c.apply(this,[e,t,o])},i.blackout)try{if(navigator.requestMediaKeySystemAccess){let t=navigator.requestMediaKeySystemAccess.bind(navigator);navigator.requestMediaKeySystemAccess=async(n,o)=>(console.log("[Ignition Sandbox] EME Protection active for:",n),t(n,o))}let e=document.createElement("video");e.id="ign-privacy-lock",e.style.cssText="position:fixed; top:-1px; left:-1px; width:1px; height:1px; pointer-events:none; opacity:0.01;",e.autoplay=!0,e.loop=!0,e.muted=!0,e.setAttribute("playsinline",""),e.setAttribute("disableremoteplayback",""),document.documentElement.appendChild(e),setInterval(()=>{e.paused&&e.play().catch(()=>{})},5e3)}catch{}if(i.sceneBypass){let e=URL.createObjectURL;URL.createObjectURL=function(t){let n=e(t);return console.debug("[Ignition Sandbox] Scene Bypass: Wrapping blob URL"),n}}Object.defineProperties(navigator,{webdriver:{get:()=>!1},hardwareConcurrency:{get:()=>8},deviceMemory:{get:()=>8},platform:{get:()=>"Win32"}});let l=HTMLCanvasElement.prototype.toDataURL;HTMLCanvasElement.prototype.toDataURL=function(e,t){let n=this.getContext("2d");if(n){let o=n.getImageData(0,0,1,1);o.data[0]=o.data[0]+(Math.random()>.5?1:-1)&255,n.putImageData(o,0,0)}return l.apply(this,[e,t])};let f=Date.prototype.getTimezoneOffset;Date.prototype.getTimezoneOffset=function(){return 480};let d=Intl.DateTimeFormat.prototype.resolvedOptions;Intl.DateTimeFormat.prototype.resolvedOptions=function(){return{...d.apply(this),timeZone:"America/Los_Angeles",locale:"en-US"}},window.addEventListener("beforeunload",e=>{e.preventDefault(),e.returnValue="Ignition Session Active. Cancel to remain persistent."}),Object.defineProperty(document,"visibilityState",{get:()=>"hidden"}),Object.defineProperty(document,"hidden",{get:()=>!0});let g=CanvasRenderingContext2D.prototype.measureText;if(CanvasRenderingContext2D.prototype.measureText=function(e){let t=g.apply(this,[e]);return Object.defineProperty(t,"width",{value:t.width+(Math.random()*.02-.01)}),t},"getBattery"in navigator&&(navigator.getBattery=()=>Promise.resolve({level:.85,charging:!0,chargingTime:0,dischargingTime:1/0})),i.blackout){console.log("[Ignition 3.1] EME Chameleon: Heartbeat started.");let e=document.createElement("div");e.id="ign-chameleon-safe",e.style.cssText='position:fixed; top:0; left:0; width:100%; height:100%; z-index:2147483647; background: #fff url("https://www.google.com/slides/logo.png") center no-repeat; display:none;',document.documentElement.appendChild(e),window.IgnitionEME={triggerGaslight:t=>{e.style.display=t?"block":"none",console.warn("[Ignition 3.1] EME Chameleon: Administrative probe detected. Gaslighting active.")}}}let u=e=>{if(!e)return;let t=0;setInterval(()=>{t+=(Math.random()-.5)*.02+Math.sin(Date.now()/1e3)*.005,Object.defineProperty(e,"x",{get:()=>t})},33)};"Accelerometer"in window&&u(new window.Accelerometer);let m=(e,t)=>{Object.defineProperty(e,"toString",{value:function(){return`function ${t.name}() { [native code] }`}}),Object.defineProperty(e,"name",{value:t.name})},p=Reflect.get;window.Reflect.get=function(e,t,n){return t==="toString"&&(e===fetch||e===history.pushState)?function(){return`function ${t}() { [native code] }`}:p.apply(this,[e,t,n])};let y=WebGLRenderingContext.prototype.getParameter;WebGLRenderingContext.prototype.getParameter=function(e){return e===37445?"Google Inc. (NVIDIA Corporation)":e===37446?"ANGLE (NVIDIA, NVIDIA GeForce RTX 4070 Direct3D11 vs_5_0 ps_5_0, D3D11)":y.apply(this,[e])},window.IgnitionLSB={decode:e=>{console.log("[Ignition 3.0] Pixel Protocol: Extracting hidden LSB frames...")}},console.log("\u{1F311} Ignition 3.0 Invisibility Protocol Active")})();})();
